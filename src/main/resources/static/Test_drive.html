<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Schedule Test Drive | WheelsHub</title>
  <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/@phosphor-icons/web"></script>
  <style>
    body {
      background-color: #1c1c1c; 
      font-family: 'Outfit', sans-serif;
      color: #e0e0e0; 
    }
    .header-bg {
      background-color: #0a0a0a;
    }
    .form-container {
      background-color: #0a0a0a; 
      border: 1px solid #2a2a2a; 
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
    }
    .info-section {
      background: linear-gradient(135deg, #1a1a1a, #0a0a0a); 
      border-right: 1px solid #2a2a2a; 
    }
    .gold-text {
      color: #FFD700;
    }
    .gold-bg {
      background-color: #FFD700;
    }
    .gold-bg:hover {
      background-color: #e6c200;
    }
    .input-field {
      background-color: #1a1a1a; 
      border: 1px solid #3a3a3a;
      color: #e0e0e0;
      transition: border-color 0.3s ease, box-shadow 0.3s ease;
    }
    .input-field:focus {
      border-color: #FFD700;
      box-shadow: 0 0 0 2px rgba(255, 215, 0, 0.3);
      outline: none;
    }
    .custom-select-wrapper {
      position: relative;
    }
    .custom-select-wrapper::after {
      content: '\ea4e'; 
      font-family: 'remixicon' !important;
      position: absolute;
      right: 1rem;
      top: 50%;
      transform: translateY(-50%);
      pointer-events: none;
      color: #FFD700;
      font-size: 1.25rem;
    }
    .custom-select {
      -webkit-appearance: none;
      -moz-appearance: none; 
      appearance: none; 
      padding-right: 2.5rem; 
    }
  </style>
</head>
<body class="min-h-screen flex flex-col">

<!-- Header -->
<header class="header-bg p-4 flex flex-col md:flex-row justify-between items-center shadow-lg sticky top-0 z-50">
  <div class="flex items-center gap-4 mb-4 md:mb-0">
    <img src="photos/wheelshub logo no bg.png" alt="WheelsHub Logo" class="h-12">
    <h1 class="text-3xl font-bold gold-text">WheelsHub</h1>
  </div>
  <nav>
    <ul class="flex flex-wrap justify-center space-x-4 md:space-x-6 text-lg">
      <li><a href="/site.html" class="text-gray-300 hover:gold-text transition duration-300">Home</a></li>
      <li><a href="/brands.html" class="text-gray-300 hover:gold-text transition duration-300">Brands</a></li>
      <li><a href="/Test_drive.html" class="gold-text transition duration-300">Test Drive</a></li>
      <li><a href="/about.html" class="text-gray-300 hover:gold-text transition duration-300">About Us</a></li>
      <li><a href="/auth.html" class="bg-gold-text text-[#0a0a0a] font-semibold py-2 px-4 rounded hover:bg-yellow-500 transition">Login / Sign Up</a></li>
    </ul>
  </nav>
</header>

<!-- Test Drive Scheduler -->
<main class="flex-grow py-12 md:py-20 bg-[#1c1c1c]">
  <div class="container mx-auto px-6">
    <div class="max-w-5xl mx-auto form-container rounded-xl overflow-hidden">
      <div class="flex flex-col md:flex-row">
        <!-- Left Side Info -->
        <div class="md:w-1/2 p-8 md:p-12 info-section text-white">
          <h2 class="text-3xl md:text-4xl font-bold mb-6 gold-text">Schedule Your Test Drive</h2>
          <p class="mb-8 text-white/90 leading-relaxed">Experience the thrill of driving your dream luxury vehicle. Schedule a personalized test drive at your convenience and let us bring the WheelsHub experience to you.</p>

          <div class="mb-8">
            <h3 class="text-xl font-semibold mb-4 gold-text">What to Expect</h3>
            <ul class="space-y-3 text-white/80">
              <li class="flex items-start gap-3"><i class="ri-check-line w-6 text-gold-text text-xl"></i><span>Personalized vehicle introduction and detailed walkthrough.</span></li>
              <li class="flex items-start gap-3"><i class="ri-check-line w-6 text-gold-text text-xl"></i><span>Comprehensive feature demonstration by our expert team.</span></li>
              <li class="flex items-start gap-3"><i class="ri-check-line w-6 text-gold-text text-xl"></i><span>Uninterrupted driving experience on a pre-selected route.</span></li>
              <li class="flex items-start gap-3"><i class="ri-check-line w-6 text-gold-text text-xl"></i><span>Detailed financing options discussion tailored to your needs.</span></li>
            </ul>
          </div>

          <div class="flex items-center gap-4 mt-8 p-4 bg-[#1a1a1a] rounded-lg border border-[#2a2a2a]">
            <div class="w-12 h-12 flex items-center justify-center bg-gold-text/20 rounded-full">
              <i class="ri-customer-service-2-line ri-lg text-gold-text text-2xl"></i>
            </div>
            <div>
              <p class="text-sm opacity-80">Need assistance or have questions?</p>
              <p class="font-semibold text-white text-lg">+91 84XX9X587X</p>
            </div>
          </div>
        </div>

        <!-- Right Side Form -->
        <div class="md:w-1/2 p-8 md:p-12 bg-[#1a1a1a] text-white">
          <form id="test-drive-form" class="space-y-6">
            <div>
              <label for="name" class="block text-sm font-medium mb-2 gold-text">Full Name</label>
              <input type="text" id="name" required class="input-field w-full rounded p-3 focus:ring-gold-text"/>
            </div>
            <div>
              <label for="phone" class="block text-sm font-medium mb-2 gold-text">Phone Number</label>
              <input type="tel" id="phone" required class="input-field w-full rounded p-3 focus:ring-gold-text"/>
            </div>
            <div>
              <label for="email" class="block text-sm font-medium mb-2 gold-text">Email Address</label>
              <input type="email" id="email" required class="input-field w-full rounded p-3 focus:ring-gold-text"/>
            </div>
            <div>
              <label for="brand" class="block text-sm font-medium mb-2 gold-text">Select Brand</label>
              <div class="custom-select-wrapper">
                <select id="brand" required class="input-field custom-select w-full rounded p-3 focus:ring-gold-text">
                  <option value="" disabled selected>Choose a brand</option>
                  <option value="rolls-royce">Rolls Royce</option>
                  <option value="bmw">BMW</option>
                  <option value="mercedes">Mercedes</option>
                  <option value="audi">Audi</option>
                  <option value="ferrari">Ferrari</option>
                  <option value="lamborghini">Lamborghini</option>
                  <option value="bentley">Bentley</option>
                  <option value="aston-martin">Aston Martin</option>
                  <option value="mclaren">McLaren</option>
                  <option value="porsche">Porsche</option>
                </select>
              </div>
            </div>
            <div>
              <label for="car" class="block text-sm font-medium mb-2 gold-text">Select Car</label>
              <div class="custom-select-wrapper">
                <select id="car" required class="input-field custom-select w-full rounded p-3 focus:ring-gold-text" disabled>
                  <option value="" disabled selected>Choose a car</option>
                </select>
              </div>
            </div>
            <div>
              <div class="flex items-start gap-3 text-sm text-white/80">
                <input type="checkbox" id="terms" class="mt-1 accent-[#FFD700]" required>
                <label for="terms" class="text-sm leading-relaxed">
                  I agree to the <a href="#" class="gold-text hover:underline">Terms & Conditions</a> and
                  <a href="#" class="gold-text hover:underline">Privacy Policy</a>.
                </label>
              </div>
            </div>
            <button type="submit" class="w-full gold-bg hover:gold-bg text-[#0a0a0a] font-semibold py-3 rounded transition">Schedule Test Drive</button>
          </form>
        </div>
      </div>
    </div>
  </div>
</main>

<!-- Footer -->
<footer class="header-bg p-6 text-center text-gray-400 shadow-inner mt-auto">
  <p>&copy; 2025 WheelsHub. All rights reserved.</p>
  <div class="flex justify-center space-x-4 mt-4">
    <a href="#" class="hover:gold-text transition"><i class="ph ph-facebook-logo text-2xl"></i></a>
    <a href="#" class="hover:gold-text transition"><i class="ph ph-instagram-logo text-2xl"></i></a>
    <a href="#" class="hover:gold-text transition"><i class="ph ph-twitter-logo text-2xl"></i></a>
    <a href="#" class="hover:gold-text transition"><i class="ph ph-linkedin-logo text-2xl"></i></a>
  </div>
</footer>

<!-- Dynamic Car Dropdown Script -->
<script>
  const carOptions = {
    "rolls-royce": ["Spectre", "Phantom", "Cullinan", "Ghost", "Wraith"],
    "bmw": ["BMW M8", "BMW M5", "BMW X7", "BMW M4", "BMW iX1", "iX xDRIVE50", "BMW i4", "BMW i7", "BMW i7 M70 xDRIVE", "BMW i5", "BMW X1", "X3", "X5", "M2", "M340i", "Z4", "XM", "7 Series", "5 Series", "3 Series"],
    "mercedes": ["Mercedes-Benz S-Class", "Mercedes-Benz E-Class", "Mercedes-Benz G63", "Mercedes-Benz AMG GT", "A Class", "C Class", "EQS", "EQA", "EQB", "EQE", "GLA", "GLC", "GLE", "GLS", "CLE Cabriolet"],
    "audi": ["RS7", "Q8", "e-tron GT", "Q7", "RSQ8", "A4", "A5", "A6", "Q3", "Q5"],
    "ferrari": ["SF90 Stradale", "812", "F8 Tributo", "Roma", "296 GT", "Purosangue", "12Cilindri", "Daytona", "Monza", "F80", "F50", "F40", "GTO", "LaFerrari", "Enzo Ferrari"],
    "lamborghini": ["Temerario", "Urus", "Aventador", "Huracan", "Revuelto"],
    "bentley": ["Continental GT", "Bentayaga", "GTC", "Flying Spur"],
    "aston-martin": ["DB12", "Valhalla", "Valkyrie", "Vantage", "Vanquish", "DBX", "Valour", "Valiant"],
    "mclaren": ["McLaren P1", "McLaren GT", "McLaren Artura", "McLaren 675LT", "McLaren 600LT", "McLaren 720S", "McLaren Senna", "McLaren 765LT", "750S", "Elva", "Speedtail", "570S", "570GT", "540C", "650S", "12C", "F1"],
    "porsche": ["Cayenne", "Macan", "718", "911", "Taycan", "Panamera"]
  };

  const brandSelect = document.getElementById('brand');
  const carSelect = document.getElementById('car');

  brandSelect.addEventListener('change', () => {
    const selectedBrand = brandSelect.value;
    const models = carOptions[selectedBrand] || [];

    // Clear existing options
    carSelect.innerHTML = '<option value="" disabled selected>Choose a car</option>';

    // Populate with new options
    if (models.length > 0) {
      models.forEach(model => {
        const option = document.createElement('option');
        option.value = model.toLowerCase().replace(/\s+/g, '-'); // Create a slug-like value
        option.textContent = model;
        carSelect.appendChild(option);
      });
      carSelect.disabled = false; // Enable car dropdown
    } else {
      carSelect.disabled = true; // Disable if no models
    }
  });

  // Optional: Add form submission handling (placeholder)
  document.getElementById('test-drive-form').addEventListener('submit', async (e) => {
    e.preventDefault();

    const form = e.target;
    const formData = {
      fullName: form.elements.name.value,
      phoneNumber: form.elements.phone.value,
      emailAddress: form.elements.email.value,
      brand: form.elements.brand.value,
      carModel: form.elements.car.value,
      agreeTerms: form.elements.terms.checked
    };

    try {
      const response = await fetch('/api/test-drive/schedule', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(formData)
      });

      const data = await response.json();

      if (response.ok) {
        alert('Test Drive Scheduled Successfully: ' + data.message);
        form.reset(); // Clear the form on success
        carSelect.disabled = true; // Disable car dropdown after reset
        carSelect.innerHTML = '<option value="" disabled selected>Choose a car</option>'; // Reset car options
      } else {
        // Handle validation errors or other backend errors
        let errorMessage = 'Failed to schedule test drive.';
        if (data.message) {
          errorMessage += '\n' + data.message;
        } else if (data.errors && data.errors.length > 0) {
          errorMessage += '\n' + data.errors.map(err => err.defaultMessage).join('\n');
        }
        alert(errorMessage);
      }
    } catch (error) {
      console.error('Error scheduling test drive:', error);
      alert('An error occurred while scheduling your test drive. Please try again.');
    }
  });
</script>
</body>
</html>
